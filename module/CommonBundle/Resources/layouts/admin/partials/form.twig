{% macro renderForm(form) %}
    {% do form.prepare() %}
    {% autoescape false %}
        {% set buttons = [] %}
        {{ form().openTag(form) }}
            {{ _self.renderFieldset(form) }}
        {{ form().closeTag() }}
    {% endautoescape %}
{% endmacro %}

{% macro renderFieldset(fieldset) %}
    {% autoescape false %}
        {% set buttons = [] %}
        {% for element in fieldset %}
            {% if element.add is defined %}
                {% if element.showAs() == 'fieldset' and element.getLabel() %}
                    <fieldset class="{{ element.getAttribute('class') }}" id="{{ element.getAttribute('id') }}">
                        <legend>{{ translate(element.getLabel()) }}</legend>
                        {{ _self.renderFieldset(element) }}
                    </fieldset>
                    {% if element.shouldCreateTemplate() %}
                        <span id="data-template" data-template="{{ _self.renderFieldset(element.getTemplateElement())|escape }}"></span>
                    {% endif %}
                {% else %}
                    <div class="{{ element.getAttribute('class') }}" id="{{ element.getAttribute('id') }}">
                        {{ _self.renderFieldset(element) }}
                    </div>
                {% endif %}
            {% elseif element.getAttribute('type') == 'submit'or element.getAttribute('type') == 'reset' or element.getAttribute('type') == 'button' %}
                {% set buttons = buttons|merge([element]) %}
            {% elseif element.getAttribute('type') == 'tabs' %}
            <ul class="tabs {{ element.getAttribute('class') }}" id="{{ element.getAttribute('id') }}">
                {% for language,tab in element.getTabs() %}
                    <li><a href="{{ tab }}" data-toggle="tab">{{ translate(language) }}</a></li>
                {% endfor %}
            </ul>
            {% elseif element.getAttribute('type') == 'hidden' %}
                <div>
                    {{ formElement(element) }}
                </div>
            {% elseif element.getAttribute('type') == 'radio' %}
                <div class="row">
                    <span class="label">
                        {% if element.isRequired() %}<b>{% endif %}
                            {% if element.getLabel() != '' %}{{ translate(element.getLabel()) }}{% endif %}
                        {% if element.isRequired() %}</b>{% endif %}
                    </span>
                    <div class="field">
                        <div>
                            {{ formElement(element) }}
                        </div>
                    </div>
                    <div class="errors">{{ formElementErrors(element) }}</div>
                </div>
            {% else %}
                <div class="row">
                    <span class="label">
                        {{ formLabel().openTag(element) }}
                            {% if element.getLabel() != '' %}{{ translate(element.getLabel()) }}{% endif %}
                        {{ formLabel().closeTag() }}
                    </span>
                    <span class="field">
                        {{ formElement(element) }}
                    </span>
                    <div class="errors">{{ formElementErrors(element) }}</div>
                </div>
            {% endif %}
        {% endfor %}
        {% if buttons|length > 0 %}
            <div class="form-actions">
                {% for button in buttons %}
                    <div class="row">
                        <span class="label"></span>
                        <span class="field">
                            {{ formElement(button) }}
                        </span>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endautoescape %}
{% endmacro %}

{% extends 'registration/base.twig' %}

{% block content %}
    <div class="page-header">
        <p><b>Choose the bus(es) you want to take and submit your reservation.</b></p>
    </div>
    <div class="flashmessage alert alert-danger fade" id="invalid_email">
        <a class="close">&times;</a>
        {{ translate('The email you entered is already used.') }}
    </div>
    <div class="flashmessage alert alert-danger fade" id="used_code">
        <a class="close">&times;</a>
        {{ translate('The code you entered was already used to create a bus reservation.') }}
    </div>

    <div class="flashmessage alert alert-warning" id="warning_email">
        {{ translate('Be sure the submitted email address you enter is correct!  This address will be used with the corresponding code to edit your registration!') }}
    </div>

    <div class="row">
        <div class="col-md-6"></div>
        <div class="col-md-10">
    		<h2 id="registration">New Registration</h2>
    		{% import 'site/partials/form.twig' as forms %}
            {{ forms.renderForm(addForm) }}
    	</div>
    	<div class="col-md-3"></div>
    </div>
{% endblock %}

{% block content_script %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#warning_email').addClass('in');
            if ('invalid_email' == '{{ status }}') {
                $('#invalid_email').addClass('in');
                setTimeout(function () {$('.flashmessage').removeClass('in')}, 3000);
            }
            if ('used_code' == '{{ status }}') {
                $('#used_code').addClass('in');
                document.getElementById("registration").remove();
                document.getElementById("warning_email").remove();
            }
        });
    </script>
{% endblock %}

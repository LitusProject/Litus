<?= $this->partial('partials/booking/navigation.phtml', array('currentAction' => 'manage')); ?>

<div id="flashmessenger">
	<? foreach($this->flashMessages as $message) { echo $message; } ?>
</div>

<div id="controller_action">
	<table>
    
        <tr>
            <th>Person</th>
            <th>Article</th>
            <th>Number</th>
            <th>Book date</th>
            <th>Status</th>
			<th>Actions</th>
        </tr>
        
        <? foreach ($this->paginator as $booking): ?>

            <tr>
                <td><?= $booking->getPerson()->getFullName(); ?></td>
                <td><?= $booking->getArticle()->getTitle(); ?></td>
                <td><?= $booking->getNumber(); ?></td>
                <td><?= $booking->getBookDate()->format('d/m/Y H:i'); ?></td>
                <td><?= $booking->getStatus(); ?></td>
                <td>
					<? if ('assigned' == $booking->getStatus()): ?>
						<a href="<?= $this->url(array('action' => 'unassign', 'id' => $booking->getId())); ?>" class="edit">Unassign</a>
					<? else: ?>
						<a href="<?= $this->url(array('action' => 'delete', 'id' => $booking->getId())); ?>" class="delete">Delete</a>
					<? endif; ?>
				</td>
            </tr>
    
        <? endforeach; ?>
    </table>

	<?= $this->paginationControl($this->paginator, 'all', 'partials/pagination.phtml'); ?>
</div>

<aside>
	<div class="sidebox">
        <div class="title">Assign bookings</div>
       	<div class="content">
	    	<p>
	        	<i>Please hit the link below to assign bookings!</i>
	        </p>
	        <p>
	           	<a href="<?= $this->url(array('action' => 'assign')); ?>">&rarr; Assign bookings</a>
	        </p>
	    </div>
	</div>
</aside>
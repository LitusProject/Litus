<?  echo $this->partial('partials/sale/navigation.phtml', array('currentAction' => 'manage')); ?>

<div id="controller_action">
	<? foreach($this->flashMessages as $message) { echo $message; } ?>
    
    <table class="full_width">
    
        <tr>
            <th>Manager</th>
            <th>Open?</th>
            <th>Start</th>
	    	<th>End</th>
            <th>Register Start</th>
            <th>Register End</th>
			<th>Action</th>
        </tr>
        
        <? foreach ($this->sessions as $session): ?>
            <tr>
                <td><?= $session->getManager() ? $session->getManager()->getUserName() : 'guest'; ?></td>
                <td><?= $session->isOpen() ? 'yes' : 'no'; ?></td>
                <td valign=center><?= $session->getOpenDate()->format('Y-m-d H:i:s'); ?></td>
                <td><?= $session->isOpen() ? '' : $session->getCloseDate()->format('Y-m-d H:i:s'); ?></td>
                <td>&euro; <?= number_format($session->getOpenAmount()->getTotalAmount()/100, 2); ?></td>
                <td><?= $session->isOpen() ? '' : '&euro; '.number_format($session->getCloseAmount()->getTotalAmount()/100, 2); ?></td>
				<td><a href="<?= $this->url(array('action' => 'managesession', 'id' => $session->getId())); ?>" class="edit">Edit</a></td>
            </tr>
        <? endforeach; ?>
    </table>

	<?= $this->paginationControl($this->sessions, 'all', 'partials/pagination.phtml', array('fullWidth' => true)); ?>
</div>

